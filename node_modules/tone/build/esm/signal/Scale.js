var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { optionsFromArguments } from "../core/util/Defaults";
import { Add } from "./Add";
import { Multiply } from "./Multiply";
import { SignalOperator } from "./SignalOperator";
/**
 * Performs a linear scaling on an input signal.
 * Scales a NormalRange input to between
 * outputMin and outputMax.
 *
 * @example
 * var scale = new Scale(50, 100);
 * var signal = new Signal(0.5).connect(scale);
 * //the output of scale equals 75
 */
var Scale = /** @class */ (function (_super) {
    __extends(Scale, _super);
    function Scale() {
        var _this = _super.call(this, Object.assign(optionsFromArguments(Scale.getDefaults(), arguments, ["min", "max"]))) || this;
        _this.name = "Scale";
        _this.input = new Multiply({
            context: _this.context,
            value: 1,
        });
        _this.output = new Add({
            context: _this.context,
            value: 0,
        });
        var options = optionsFromArguments(Scale.getDefaults(), arguments, ["min", "max"]);
        _this._outputMin = options.min;
        _this._outputMax = options.max;
        _this.input.connect(_this.output);
        _this._setRange();
        return _this;
    }
    Scale.getDefaults = function () {
        return Object.assign(SignalOperator.getDefaults(), {
            max: 1,
            min: 0,
        });
    };
    Object.defineProperty(Scale.prototype, "min", {
        /**
         * The minimum output value. This number is output when the value input value is 0.
         */
        get: function () {
            return this._outputMin;
        },
        set: function (min) {
            this._outputMin = min;
            this._setRange();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Scale.prototype, "max", {
        /**
         * The maximum output value. This number is output when  the value input value is 1.
         */
        get: function () {
            return this._outputMax;
        },
        set: function (max) {
            this._outputMax = max;
            this._setRange();
        },
        enumerable: true,
        configurable: true
    });
    /**
     *  set the values
     */
    Scale.prototype._setRange = function () {
        this.output.value = this._outputMin;
        this.input.value = this._outputMax - this._outputMin;
    };
    Scale.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this.input.dispose();
        this.output.dispose();
        return this;
    };
    return Scale;
}(SignalOperator));
export { Scale };
//# sourceMappingURL=Scale.js.map